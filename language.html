<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Multilingual Website</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      line-height: 1.6;
      transition: opacity 0.3s;
    }
    body.translating { opacity: 0.7; }

    /* Dropdown Styling */
    #lang-dropdown {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 99999;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.2);
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    #lang-select {
      padding: 14px 20px;
      font-size: 16px;
      border: none;
      outline: none;
      background: transparent;
      cursor: pointer;
      width: 100%;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 15px center;
      background-size: 12px;
    }
    .loading-text {
      position: fixed;
      bottom: 70px;
      right: 30px;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 8px 15px;
      border-radius: 8px;
      font-size: 14px;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .loading-text.show { opacity: 1; }
  </style>
</head>
<body>

  <h1>Welcome to My Awesome Website</h1>
  <p>This entire page will be instantly translated when you choose a language from the dropdown below!</p>
  <ul>
    <li>100% free translation</li>
    <li>Real flags & native language names</li>
    <li>Now includes Yoruba, Igbo, and Hausa!</li>
    <li>Works perfectly on mobile too</li>
  </ul>
  <button onclick="alert('This button text also gets translated!')">Click Me</button>

  <!-- Dropdown with Yoruba, Igbo, Hausa added -->
  <div id="lang-dropdown">
    <select id="lang-select">
      <option value="en">ğŸ‡¬ğŸ‡§ English</option>
      <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
      <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
      <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
      <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
      <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
      <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
      <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ (ç®€ä½“)</option>
      <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
      <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
      <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
      <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
      <option value="nl">ğŸ‡³ğŸ‡± Nederlands</option>
      <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
      <option value="yo">ğŸ‡³ğŸ‡¬ YorÃ¹bÃ¡</option>
      <option value="ig">ğŸ‡³ğŸ‡¬ Igbo</option>
      <option value="ha">ğŸ‡³ğŸ‡¬ HÃ usÃ </option>
      <option value="pl">ğŸ‡µğŸ‡± Polski</option>
      <option value="sv">ğŸ‡¸ğŸ‡ª Svenska</option>
      <option value="th">ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢</option>
      <option value="vi">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</option>
      <option value="id">ğŸ‡®ğŸ‡© Bahasa Indonesia</option>
    </select>
  </div>

  <div class="loading-text" id="loading-text">Translating...</div>

  <script>
    const translationCache = {};

    async function translateText(text, targetLang) {
      if (targetLang === 'en' || !text.trim()) return text;

      const cacheKey = `${text}|||${targetLang}`;
      if (translationCache[cacheKey]) return translationCache[cacheKey];

      // MyMemory API (supports Yoruba, Igbo, Hausa perfectly)
      try {
        const res = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=en|${targetLang}`);
        const data = await res.json();
        if (data.responseStatus === 200) {
          translationCache[cacheKey] = data.responseData.translatedText;
          return data.responseData.translatedText;
        }
      } catch(e) {}

      // LibreTranslate fallback (also supports ha, yo, ig)
      try {
        const res = await fetch('https://libretranslate.de/translate', {
          method: 'POST',
          body: JSON.stringify({ q: text, source: 'en', target: targetLang, format: 'text' }),
          headers: { 'Content-Type': 'application/json' }
        });
        const data = await res.json();
        translationCache[cacheKey] = data.translatedText;
        return data.translatedText;
      } catch(e) {
        return text;
      }
    }

    async function translatePage(lang) {
      document.body.classList.add('translating');
      document.getElementById('loading-text').classList.add('show');

      const elements = document.querySelectorAll('h1,h2,h3,h4,h5,h6,p,li,span,a,button,input,textarea,option,title');

      for (let el of elements) {
        if (el.children.length === 0 && el.textContent.trim()) {
          const original = el.dataset.original || el.textContent.trim();
          if (!el.dataset.original) el.dataset.original = original;

          if (lang === 'en') {
            el.textContent = original;
            if (el.tagName === 'TITLE') document.title = original;
          } else {
            const translated = await translateText(original, lang);
            el.textContent = translated;
            if (el.tagName === 'TITLE') document.title = translated;
          }
        }
      }

      document.body.classList.remove('translating');
      document.getElementById('loading-text').classList.remove('show');
    }

    document.getElementById('lang-select').addEventListener('change', function() {
      const lang = this.value;
      translatePage(lang);
      localStorage.setItem('preferredLang', lang);
    });

    window.addEventListener('load', () => {
      const saved = localStorage.getItem('preferredLang');
      const browserLang = (navigator.language || navigator.userLanguage).split('-')[0];
      const defaultLang = saved || (browserLang !== 'en' ? browserLang : 'en');

      if (defaultLang !== 'en') {
        document.getElementById('lang-select').value = defaultLang;
        setTimeout(() => translatePage(defaultLang), 800);
      }
    });
  </script>
</body>
</html>